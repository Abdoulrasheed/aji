{% extends 'app/home.html' %}
{% load static humanize %}

{% block main %}
    <div class="page-content">
		<!--Main content-->
		  <div class="col-md-12">
  			<div class="content-box-large">
  				<div class="panel-heading">
					<div class="panel-title">Reports</div>
				</div>
  				<div class="panel-body">
			<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="myTable">
						<thead>
							<tr>
								<th>S/No</th>
								<th>Vehicle Type</th>
								<th>Fees</th>
								<th>Date</th>
								<th>Gate No</th>
								<th>Username</th>
							</tr>
						</thead>
						<tbody>
							{% for v in data %}
							<tr>
								<td>{{ forloop.counter }}</td>
								<td>{{ v.vehicleType }}</td>
								<td>{{ v.fees }}</td>
								<td>{{ v.datetime }}</td>
								<td>Gate {{ v.gateNum }}</td>
								<td>{{ v.username }}</td>
							</tr>
							{% empty %}
							<tr>
							<p>No record available</p>
							</tr>
							{% endfor %}
						</tbody>
					</table>
  				</div>
  			</div>
		  </div>
		</div>
		    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- jQuery UI -->
    <script src="https://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
		<script type="text/javascript">
			$(document).ready(()=>{
				const endpoint = `http://${window.location.hostname}:8000/api/t/`;
				$.ajax({
					url: endpoint,
					success: (data) => {
						console.log(data)
						$('.table_data').html(data);
				},
			    
			    error: (error_data) => {
			      	console.log(`error_data: ${error_data}`);
			    },
		 	});
		});
		</script>
		{% endblock main %}